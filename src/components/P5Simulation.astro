---
const { sketch } = Astro.props;

function loadP5() {
  console.log("Intentando cargar p5.js...");
  
  if (!(window as any).p5) {
    const script = document.createElement("script");
    script.src = "https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js";
    script.onload = () => {
      console.log("p5.js cargado correctamente.");
      new p5(sketch);
    };
    document.body.appendChild(script);
  } else {
    console.log("p5.js ya estaba cargado.");
    new p5(sketch);
  }
}

// Solo ejecutar en el cliente
if (typeof window !== "undefined") {
  console.log("Cargando p5.js en el cliente...");
  loadP5();
}
else{
  console.log("No se puede cargar p5.js en el servidor.");
}
---

<div id="p5-container"></div>

<style>
  #p5-container {
    width: 600px;
    height: 600px;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: red; /* Cambia el color de fondo */
  }
</style>
